# 更新模式使用指南

## ✅ 功能完成

現在 Notion AI 文檔整理器支援兩種模式：

### 1. 新建模式（預設）
```bash
python3 organize_and_upload.py <文檔路徑>
python3 organize_and_upload.py <文檔路徑> --mode=new
```

- 每次都創建新的 Notion 頁面
- 適合首次上傳文檔

### 2. 更新模式（新功能）⭐
```bash
python3 organize_and_upload.py <文檔路徑> --mode=update
```

- 查找現有頁面並更新
- **保留您手動添加的內容**
- 用顏色標記變更

---

## 🎨 更新模式特點

### 智能識別現有頁面
根據來源檔案名稱自動查找對應的 Notion 頁面

### 內容分類保留
- 📌 **灰色** - 來源檔案（系統生成，會更新）
- 📋 **藍色** - 摘要（系統生成，會更新）
- 🤖 **紫色** - AI 建議（系統生成，會更新）
- 👤 **白色/其他** - 用戶手動內容（**會保留**）

### 變更標記
- 🟡 **黃色** - 文檔已更新

---

## 📋 使用範例

### 範例 1：首次上傳
```bash
# 創建新頁面
python3 organize_and_upload.py ../CHANGELOG.md
```

### 範例 2：文檔有更新
```bash
# 更新現有頁面
python3 organize_and_upload.py ../CHANGELOG.md --mode=update
```

**結果**：
1. ✅ 系統內容更新為最新版本
2. ✅ 您在 Notion 添加的筆記保留
3. 🟡 頁面頂部顯示「文檔已更新」標記

### 範例 3：不含 AI 建議的更新
```bash
python3 organize_and_upload.py ../README.md --mode=update --no-insights
```

---

## 🔍 更新模式運作流程

```
1. 讀取本地文檔 📄
   ↓
2. AI 分析優化 🤖
   ↓
3. 查找現有 Notion 頁面 🔍
   ↓
4. 找到 → 識別用戶內容 👤
   ↓
5. 刪除舊的系統內容 🗑️
   ↓
6. 添加更新標記 🟡
   ↓
7. 添加新的系統內容 📋
   ↓
8. 保留用戶內容在最後 ✅
   ↓
9. 完成！
```

---

## 💡 最佳實踐

### 何時使用新建模式
- ✅ 首次上傳文檔
- ✅ 想保留多個版本對比
- ✅ 測試不同的 AI 建議

### 何時使用更新模式
- ✅ 文檔有新版本
- ✅ 已在 Notion 添加筆記
- ✅ 想保持頁面連結不變

---

## ⚠️ 注意事項

### 頁面識別方式
系統根據**來源檔案名稱**查找頁面，確保：
- 檔案名稱不要改變
- 來源檔案資訊（灰色 callout）不要刪除

### 用戶內容識別
以下會被識別為**系統內容**（會被更新）：
- 📌 灰色 callout（來源檔案）
- 📋 藍色 callout（摘要）
- 🤖 紫色 callout（AI 建議）

其他顏色或格式會被視為**用戶內容**（會保留）

---

## 🚀 進階使用

### 批量更新
```bash
# 更新所有重要文檔
for file in CHANGELOG.md README.md 專案遷移指南.md; do
    python3 organize_and_upload.py ../$file --mode=update
done
```

### 定期同步
建議每週或每月更新一次，確保 Notion 內容與文檔同步。

---

## 📊 功能對比

| 功能 | 新建模式 | 更新模式 |
|------|---------|---------|
| 創建頁面 | ✅ 每次創建新頁面 | ⚠️ 僅在找不到時創建 |
| 保留連結 | ❌ 連結會變 | ✅ 連結不變 |
| 用戶內容 | ❌ 不保留 | ✅ 保留 |
| 版本對比 | ✅ 可保留多版本 | ❌ 覆蓋舊版 |
| 變更標記 | ❌ 無 | ✅ 有 |

---

## 🎯 總結

**更新模式**是您在 Notion 中做筆記的最佳搭檔：
- 💾 自動同步文檔變更
- 📝 保留您的個人筆記
- 🎨 清楚標記系統更新
- 🔗 頁面連結永不失效
